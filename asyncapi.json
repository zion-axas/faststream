{
  "asyncapi": "2.6.0",
  "defaultContentType": "application/json",
  "info": {
    "title": "FastStream",
    "version": "0.1.0",
    "description": ""
  },
  "servers": {
    "development": {
      "url": "amqp://guest:guest@localhost:5672/",
      "protocol": "amqp",
      "protocolVersion": "0.9.1"
    }
  },
  "channels": {
    "que1:_:BaseHandler": {
      "servers": [
        "development"
      ],
      "bindings": {
        "amqp": {
          "is": "routingKey",
          "bindingVersion": "0.2.0",
          "queue": {
            "name": "que1",
            "durable": false,
            "exclusive": false,
            "autoDelete": false,
            "vhost": "/"
          },
          "exchange": {
            "type": "default",
            "vhost": "/"
          }
        }
      },
      "subscribe": {
        "bindings": {
          "amqp": {
            "cc": "que1",
            "ack": true,
            "bindingVersion": "0.2.0"
          }
        },
        "message": {
          "$ref": "#/components/messages/que1:_:BaseHandler:Message"
        }
      }
    },
    "que2:_:BaseHandler": {
      "servers": [
        "development"
      ],
      "bindings": {
        "amqp": {
          "is": "routingKey",
          "bindingVersion": "0.2.0",
          "queue": {
            "name": "que2",
            "durable": false,
            "exclusive": false,
            "autoDelete": false,
            "vhost": "/"
          },
          "exchange": {
            "type": "default",
            "vhost": "/"
          }
        }
      },
      "subscribe": {
        "bindings": {
          "amqp": {
            "cc": "que2",
            "ack": true,
            "bindingVersion": "0.2.0"
          }
        },
        "message": {
          "$ref": "#/components/messages/que2:_:BaseHandler:Message"
        }
      }
    },
    "que3:_:JsonHandler": {
      "servers": [
        "development"
      ],
      "bindings": {
        "amqp": {
          "is": "routingKey",
          "bindingVersion": "0.2.0",
          "queue": {
            "name": "que3",
            "durable": false,
            "exclusive": false,
            "autoDelete": false,
            "vhost": "/"
          },
          "exchange": {
            "type": "default",
            "vhost": "/"
          }
        }
      },
      "subscribe": {
        "bindings": {
          "amqp": {
            "cc": "que3",
            "ack": true,
            "bindingVersion": "0.2.0"
          }
        },
        "message": {
          "$ref": "#/components/messages/que3:_:JsonHandler:Message"
        }
      }
    },
    "que1:_:Publisher": {
      "servers": [
        "development"
      ],
      "bindings": {
        "amqp": {
          "is": "routingKey",
          "bindingVersion": "0.2.0",
          "queue": {
            "name": "que1",
            "durable": false,
            "exclusive": false,
            "autoDelete": false,
            "vhost": "/"
          },
          "exchange": {
            "type": "default",
            "vhost": "/"
          }
        }
      },
      "publish": {
        "bindings": {
          "amqp": {
            "cc": "que1",
            "ack": true,
            "deliveryMode": 1,
            "mandatory": true,
            "bindingVersion": "0.2.0"
          }
        },
        "message": {
          "$ref": "#/components/messages/que1:_:Publisher:Message"
        }
      }
    },
    "que2:_:Publisher": {
      "servers": [
        "development"
      ],
      "bindings": {
        "amqp": {
          "is": "routingKey",
          "bindingVersion": "0.2.0",
          "queue": {
            "name": "que2",
            "durable": false,
            "exclusive": false,
            "autoDelete": false,
            "vhost": "/"
          },
          "exchange": {
            "type": "default",
            "vhost": "/"
          }
        }
      },
      "publish": {
        "bindings": {
          "amqp": {
            "cc": "que2",
            "ack": true,
            "deliveryMode": 1,
            "mandatory": true,
            "bindingVersion": "0.2.0"
          }
        },
        "message": {
          "$ref": "#/components/messages/que2:_:Publisher:Message"
        }
      }
    }
  },
  "components": {
    "messages": {
      "que1:_:BaseHandler:Message": {
        "title": "que1:_:BaseHandler:Message",
        "correlationId": {
          "location": "$message.header#/correlation_id"
        },
        "payload": {
          "$ref": "#/components/schemas/UserInfo"
        }
      },
      "que2:_:BaseHandler:Message": {
        "title": "que2:_:BaseHandler:Message",
        "correlationId": {
          "location": "$message.header#/correlation_id"
        },
        "payload": {
          "$ref": "#/components/schemas/UserInfo"
        }
      },
      "que3:_:JsonHandler:Message": {
        "title": "que3:_:JsonHandler:Message",
        "correlationId": {
          "location": "$message.header#/correlation_id"
        },
        "payload": {
          "oneOf": [
            {
              "$ref": "#/components/schemas/JsonHandler:Message:Payload"
            },
            {
              "$ref": "#/components/schemas/DefaultHandler:Message:Payload"
            }
          ]
        }
      },
      "que1:_:Publisher:Message": {
        "title": "que1:_:Publisher:Message",
        "correlationId": {
          "location": "$message.header#/correlation_id"
        },
        "payload": {
          "$ref": "#/components/schemas/que1:_:PublisherPayload"
        }
      },
      "que2:_:Publisher:Message": {
        "title": "que2:_:Publisher:Message",
        "correlationId": {
          "location": "$message.header#/correlation_id"
        },
        "payload": {
          "$ref": "#/components/schemas/que2:_:PublisherPayload"
        }
      }
    },
    "schemas": {
      "UserInfo": {
        "properties": {
          "name": {
            "maxLength": 20,
            "minLength": 2,
            "title": "Name",
            "type": "string"
          },
          "user_id": {
            "examples": [
              1
            ],
            "exclusiveMinimum": 0,
            "title": "User Id",
            "type": "integer"
          }
        },
        "required": [
          "name",
          "user_id"
        ],
        "title": "UserInfo",
        "type": "object"
      },
      "JsonHandler:Message:Payload": {
        "properties": {
          "name": {
            "title": "Name",
            "type": "string"
          },
          "user_id": {
            "title": "User Id",
            "type": "integer"
          }
        },
        "required": [
          "name",
          "user_id"
        ],
        "title": "JsonHandler:Message:Payload",
        "type": "object"
      },
      "DefaultHandler:Message:Payload": {
        "title": "DefaultHandler:Message:Payload",
        "type": "string"
      },
      "que1:_:PublisherPayload": {},
      "que2:_:PublisherPayload": {}
    }
  }
}